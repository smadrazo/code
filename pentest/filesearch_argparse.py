#!/usr/bin/env python
# -*- coding: utf-8 -*-
#title           :filesearch.py
#description     :This program search a string on a file, providing both values on the arguments
#author          : Maimer
#date            : 23.11.2019
#version         :1.0
#usage           : filesearch.py 
#notes           : Example on how to use command arguments and helps, by using the argparse(https://docs.python.org/3/library/argparse.html) module
#python_version  :2.7.6  
#=======================================================================

import argparse,sys,os

def filesearch():    ##Defines module filesearch()
    os.system('clear')
    parser = argparse.ArgumentParser(description='Search within a File')
    group = parser.add_argument_group('Required variables')
    group.add_argument('--string','-s', help='String to search', required=True)    #Default type=str
    group.add_argument('--filepath','-f', help='Filename',nargs='?',type=argparse.FileType('r'), required=True)
    parser.add_argument('--version', action='version', version='%(prog)s 0.1')

    texto = []
    args = parser.parse_args()
    #print vars(args)  ##Prints all arguments passed
    #print (args.string)

    with args.filepath as fp :
            lines = args.filepath.readlines()
            for l in lines:
                if args.string in l:
                    texto = [l.split(' ')]  #Use space as split indicator to generate a list on variable texto
                    print texto

if __name__ == '__main__':  #Define main function
    filesearch()

